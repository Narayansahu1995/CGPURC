@model IEnumerable<Private_University.Models.StudentDetails>
@using Private_University.Models;
@{
	ViewBag.Title = "Index";
	Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<link href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css" rel="stylesheet" />
<script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js"></script>
<div class="sb2-2-2">
	<ul>
		<li>
			<a href="@Url.Action("Index", "Dashboard")"><i class="fa fa-home" aria-hidden="true"></i> Home</a>
		</li>
		<li class="active-bre">
			<a href="@Url.Action("Index", "Dashboard")"> Dashboard</a>
		</li>
		<li class="page-back">
			<a href="@Url.Action("Index", "Dashboard")"><i class="fa fa-backward" aria-hidden="true"></i> Back to Home</a>
		</li>
	</ul>
</div>
@{
	if (TempData["Msg"] != null)
	{
		@Html.Raw(TempData["Msg"])

	}
}

<!--== DASHBOARD INFO ==-->
<div class="sb2-2-3">
	<div class="row">
		<div class="col-md-12">
			<div class="box-inn-sp">
				<div class="inn-title">
					<h4>STUDENT'S FEES COLLECTION</h4>
					@*<p>All about courses, program structure, fees, best course lists (ranking), syllabus, teaching techniques and other details.</p>*@
				</div>
				<div class="tab-inn">
					<div class="row">
						<p class="col-lg-4 col-md-4 col-sm-6">
							@{
								AuthenticationResponse ARespo = (AuthenticationResponse)Session["AuthResponse"];
								//@Html.ActionLink("Create New Session", "Create", new { id = ARespo.Login_ID }, new { @class = "waves-effect waves-light light-btn waves-input-wrapper waves-button-input", onclick = "return confirm('Are sure you wants to create new Session.?');", data_toggle = "tooltip", title = "Create New Academic Session." })
							}
						</p>
					</div>
					<div class="row">
						<div class="table-responsive table-desi">
							<table id="demoGrid" class="table table-hover">

								<thead>
									<tr>
										<th>#</th>
										<th>@Html.DisplayNameFor(model => model.Student_Name)</th>
										<th>@Html.DisplayNameFor(model => model.Father_Name)</th>
										@*<th>@Html.DisplayNameFor(model => model.Date_of_Birth)</th>*@
										<th>@Html.DisplayNameFor(model => model.Enrollment_Number)</th>
										<th>@Html.DisplayNameFor(model => model.Univ_Course_Name)</th>
										<th>@Html.DisplayNameFor(model => model.Univ_subCourse_Name)</th>
										<th>@Html.DisplayNameFor(model => model.Semester_Year)</th>
										<th>Action</th>
									</tr>
								</thead>
								<tbody>
									@foreach (var item in Model)
									{
										<tr>
											<td>
												@Html.DisplayFor(modelItem => item.count)
											</td>
											<td>@Html.DisplayFor(modelItem => item.Student_Name)</td>
											<td>@Html.DisplayFor(modelItem => item.Father_Name)</td>
											@*<td>@Html.DisplayFor(modelItem => item.Date_of_Birth)</td>*@
											<td>@Html.DisplayFor(modelItem => item.Enrollment_Number)</td>
											<td>@Html.DisplayFor(modelItem => item.Univ_Course_Name)</td>
											<td>@Html.DisplayFor(modelItem => item.Univ_subCourse_Name)</td>
											<td>@Html.DisplayFor(modelItem => item.Course_Mode) - @Html.DisplayFor(modelItem => item.Semester_Year)</td>
											<td>
												@*@Html.ActionLink("Fees", "Delete", new { id = item.Student_Id }, new { @class = "ad-st-view", data_toggle = "tooltip", title = "Collect Fees from Student : " + item.Student_Name, onclick = "return confirm('Are sure you wants to Collect Fees for This.?');" })*@
												<a href="" class="btn btn-warning" data-toggle="modal" data-target="#myModal2" data-status="@item.Student_Name" data-id="@item.Student_Id" id="@item.Student_Id" style="color:#fff;" >Collect Fees</a>

											</td>
										</tr>
									}
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content" style="top: 100px;">
			@using (Html.BeginForm("index", "FeesCollect", FormMethod.Post, new { @class = "form-horizontal", role = "form", enctype = "multipart/form-data" }))
			{
				@Html.AntiForgeryToken()
				<div class="modal-header">
					<h5 class="modal-title custom_align">Fees Collection</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="form-group">
						<label class="control-label col-md-3">Student</label>
						<div class="col-md-9">
							<input class="validate" id="txt_Student_Name" name="txt_Student_Name" type="text" style="font-size: 1.4rem;" required>
							<input id="txt_Student_Id" name="txt_Student_Id" type="hidden">
						</div>
					</div>
					<div class="form-group">
						<label class="control-label col-md-3">Amount</label>
						<div class="col-md-9">
							<input class="validate" id="txt_Amount_Credit" name="txt_Amount_Credit" type="number" style="font-size: 1.4rem;" required>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label col-md-3">Date of Billing</label>
						<div class="col-md-9">
							<input class="validate" id="txt_Txn_Date" name="txt_Txn_Date" type="date" style="font-size: 1.4rem;" required>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label col-md-3">Bill Number</label>
						<div class="col-md-9">
							<input class="validate" id="txt_Bill_Number" name="txt_Bill_Number" type="text" minlength="0" maxlength="15" style="font-size: 1.4rem;" required>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label col-md-3">Narration</label>
						<div class="col-md-9">
							<input class="validate" id="txt_Narration" name="txt_Narration" type="text" minlength="3" maxlength="150" style="font-size: 1.4rem;" required>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					@*<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>*@
					<button type="submit" class="btn btn-success">Collect Fees</button>
				</div>
			}
		</div>
	</div>
</div>

<script>

	$(function () {
		$('#myModal2').on('show.bs.modal', function (e) {
			var button = $(e.relatedTarget) // Button that triggered the modal
			var Material = button.data('status') // Extract info from data-* attributes
			var ids = button.data('id') // Extract info from data-* attributes
			$(e.currentTarget).find('.modal-title').text('Collect Fees For :' + Material);
			$(e.currentTarget).find("input[name='txt_Student_Name']").val(Material);
			$(e.currentTarget).find("input[name='txt_Student_Id']").val(ids);
		});
	});

</script>  